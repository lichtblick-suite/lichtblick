# 自動更新問題 詳細確認チェックリスト

## 概要

フォークしたLichtblickプロジェクトで発生している自動更新問題について、担当者から詳細な情報を収集するためのチェックリストです。問題の根本原因を特定し、適切な解決策を選択するために必要な情報を体系的に整理します。

## 基本情報の確認

### 1. 環境情報

- [ ] **OS**: Windows / macOS / Linux（具体的なバージョンも）
- [ ] **アプリケーション形式**: デスクトップ版（Electron）/ Web版
- [ ] **ビルド環境**: 開発環境（`yarn dev`）/ 本番ビルド（`yarn build`）
- [ ] **Node.js バージョン**: `node --version` の出力
- [ ] **Yarn バージョン**: `yarn --version` の出力

### 2. プロジェクト情報

- [ ] **フォーク元**: `https://github.com/lichtblick-suite/lichtblick` からのフォークか
- [ ] **フォーク日時**: いつフォークしたか
- [ ] **最後のマージ**: 元のプロジェクトから最後にマージした日時
- [ ] **カスタム変更**: どのような変更を加えているか（概要）
- [ ] **ブランチ名**: 現在作業しているブランチ名

### 3. package.json の確認

- [ ] **repository.url**: `package.json` の `repository.url` フィールドの値
- [ ] **version**: 現在のバージョン番号
- [ ] **name**: パッケージ名が変更されているか

## 問題の詳細確認

### 4. 発生タイミング

- [ ] **いつ発生するか**:
  - [ ] アプリ起動時
  - [ ] 一定時間後（何分後か）
  - [ ] 特定の操作後
  - [ ] 不定期
- [ ] **発生頻度**:
  - [ ] 毎回
  - [ ] 時々（頻度は？）
  - [ ] 一度だけ
- [ ] **最初の発生**: いつから発生し始めたか

### 5. 具体的な現象

- [ ] **更新通知**: 更新の通知は表示されるか
- [ ] **自動ダウンロード**: 自動的にダウンロードが始まるか
- [ ] **自動インストール**: 自動的にインストールされるか
- [ ] **アプリの再起動**: アプリが自動的に再起動するか
- [ ] **変更の消失**: カスタム変更が消えるか

### 6. 更新内容の確認

- [ ] **更新前バージョン**: 更新前のバージョン番号
- [ ] **更新後バージョン**: 更新後のバージョン番号
- [ ] **更新元**: どこから更新がダウンロードされているか
- [ ] **更新ファイル**: どのようなファイルが更新されているか

## ログとエラー情報

### 7. ログの確認

- [ ] **コンソールログ**: ブラウザ/Electronのコンソールに表示されるログ
- [ ] **アプリケーションログ**: アプリケーション固有のログファイル
- [ ] **システムログ**: OS レベルのログ（必要に応じて）
- [ ] **ネットワークログ**: 更新チェック時のネットワーク通信

### 8. エラーメッセージ

- [ ] **エラーの有無**: エラーメッセージは表示されるか
- [ ] **エラー内容**: 具体的なエラーメッセージ
- [ ] **エラー発生箇所**: どの処理でエラーが発生するか

## 設定状況の確認

### 9. アプリケーション設定

- [ ] **自動更新設定**: 「Automatically install updates」の設定状況
- [ ] **設定変更**: 設定を変更したことがあるか
- [ ] **設定ファイル**: 設定ファイルの場所と内容

### 10. 開発環境設定

- [ ] **NODE_ENV**: 環境変数の設定値
- [ ] **ビルド設定**: webpack や electron-builder の設定
- [ ] **開発サーバー**: 開発サーバーで実行しているか

## 技術的詳細

### 11. ネットワーク通信

- [ ] **更新チェック URL**: どの URL に更新チェックのリクエストを送っているか
- [ ] **GitHub API**: GitHub API へのアクセス状況
- [ ] **プロキシ設定**: プロキシ環境での実行か
- [ ] **ファイアウォール**: ファイアウォールの設定

### 12. ファイルシステム

- [ ] **インストール場所**: アプリケーションのインストール場所
- [ ] **権限**: ファイルの読み書き権限
- [ ] **ディスク容量**: 十分な空き容量があるか

## 対応状況

### 13. 試行した対策

- [ ] **設定変更**: 自動更新設定を無効にしたか
- [ ] **コード修正**: コードを修正したか
- [ ] **環境変数**: NODE_ENV を設定したか
- [ ] **その他**: 他に試した対策があるか

### 14. 対策の効果

- [ ] **効果の有無**: 対策に効果があったか
- [ ] **副作用**: 対策による副作用はあるか
- [ ] **一時的/永続的**: 効果は一時的か永続的か

## 確認用コマンド

### 15. 実行してもらうコマンド

```bash
# 1. 基本情報の確認
node --version
yarn --version
git remote -v
git branch --show-current

# 2. package.json の確認
cat package.json | grep -E "(name|version|repository)"

# 3. 環境変数の確認
echo $NODE_ENV

# 4. プロセス確認（実行中の場合）
ps aux | grep -i lichtblick

# 5. ログディレクトリの確認（OS別）
# macOS
ls -la ~/Library/Logs/lichtblick/
# Windows
dir %APPDATA%\lichtblick\logs\
# Linux
ls -la ~/.config/lichtblick/logs/
```

### 16. 設定ファイルの確認

```bash
# macOS
cat ~/Library/Application\ Support/lichtblick/config.json
# Windows
type %APPDATA%\lichtblick\config.json
# Linux
cat ~/.config/lichtblick/config.json
```

## 報告テンプレート

### 17. 情報整理用テンプレート

```
## 基本情報
- OS:
- アプリ形式:
- ビルド環境:
- repository.url:

## 問題の詳細
- 発生タイミング:
- 具体的な現象:
- 更新前バージョン:
- 更新後バージョン:

## ログ・エラー
- コンソールログ:
- エラーメッセージ:

## 設定状況
- 自動更新設定:
- NODE_ENV:

## 試行した対策
- 実施した対策:
- 効果:
```

## 次のステップ

### 18. 情報収集後の対応

1. **問題の分類**: 設定問題 / コード問題 / 環境問題
2. **解決策の選択**:
   - 設定変更
   - コード修正
   - 環境変数設定
   - package.json 修正
3. **実装と検証**: 選択した解決策の実装
4. **ドキュメント更新**: 解決策の記録

## 注意事項

- **機密情報**: APIキーやトークンなどの機密情報は共有しないよう注意
- **個人情報**: ユーザー名やパスなどの個人情報は伏せる
- **スクリーンショット**: 可能であれば問題発生時のスクリーンショットを取得
- **再現手順**: 問題を再現する具体的な手順を記録

---

## 参考資料

- [フォークしたプロジェクトの自動更新問題](.docs/forked-project-auto-update-issue_ja.md)
- [electron-updater 使用ガイド](.docs/electron-updater-guide_ja.md)
- [Electron 公式ドキュメント](https://www.electronjs.org/docs/latest/)
- [electron-updater GitHub](https://github.com/electron-userland/electron-builder/tree/master/packages/electron-updater)
